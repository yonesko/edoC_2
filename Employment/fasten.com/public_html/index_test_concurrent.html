<html>
<head>
    <meta charset="UTF-8"/>
    <title>Test concurrent Auth</title>
    <script type="text/javascript">
        var ws;
        var wssOneEmail = new Array(10);
        var wssTwoEmail = new Array(5);
        var wssBadEmail = new Array(5);

        function wsInit(element) {
            element.onopen = function (event) {

            };
            element.onmessage = function (event) {
                var $textarea = document.getElementById("messages");
                $textarea.value = $textarea.value + event.data + "\n";
            };
            element.onclose = function (event) {

            };
        }

        function wssInit(arr) {
            for (i = 0; i < arr.length; i++) {
                arr[i] = new WebSocket("ws://localhost:8080/auth");
                wsInit(arr[i]);
            }
        }

        function init() {
            wssInit(wssOneEmail);
            wssInit(wssTwoEmail);
            wssInit(wssBadEmail);
        }

        function sendMessage() {
            wssOneEmail.forEach(function (element, index, array) {
                element.send(JSON.stringify(getOneEmailMsg()));
            });
            wssTwoEmail.forEach(function (element, index, array) {
                element.send(JSON.stringify(getTwoEmailMsg()));
            });
            wssBadEmail.forEach(function (element, index, array) {
                element.send(JSON.stringify(getBadEmailMsg()));
            });
        }

        function getOneEmailMsg() {
            var message = {};

            message.type = 'LOGIN_CUSTOMER';
            message.data = {};
            message.data.email = 'donatella@mail.ru';
            message.data.password = 'qwer';
            return message;
        }
        function getTwoEmailMsg() {
            var message = {};

            message.type = 'LOGIN_CUSTOMER';
            message.data = {};
            message.data.email = 'gleb@mail.ru';
            message.data.password = '123';
            return message;
        }
        function getBadEmailMsg() {
            var message = {};

            message.type = 'LOGIN_CUSTOMER';
            message.data = {};
            message.data.email = 'ololol';
            message.data.password = 'password??';
            return message;
        }

    </script>
</head>
<body onload="init();">
<div id="body">
    <div id="menu">
        <p class="welcome">
            <label for="email">Email:</label><input id="email" value="gleb@mail.ru" type="email"/>
        </p>

        <div style="clear: both"></div>
    </div>

    <div id="response">
        <textarea id="messages" rows="20" cols="50" readonly="readonly"></textarea>
    </div>
    <form name="message" action="">
        <label for="password">Password:</label><input name="password" type="password" id="password" size="40"/>
        <input type="button" name="submitmsg" value="Send..." onclick="sendMessage();"/>
    </form>
</div>
Dat page makes 10 login requests of the one email, 5 of the other and 5 baf emails at the same time;
</body>
</html>